\doxysection{Model\+Game.\+h}
\hypertarget{_model_game_8h_source}{}\label{_model_game_8h_source}\index{Model/Include/Model/ModelGame.h@{Model/Include/Model/ModelGame.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <Model/Export.h>}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <Model/Precompile.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <Model/Forwards.h>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Model/Types.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <Model/AbstractModel.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <Model/Map.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <Model/Factory/BlocksFactory.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }Tetris::Model}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{class\ }MODEL\_EXPORT\ \mbox{\hyperlink{class_tetris_1_1_model_1_1_model_game}{ModelGame}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_tetris_1_1_model_1_1_abstract_model}{AbstractModel}}}
\DoxyCodeLine{00021\ \ \ \ \ \{}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_tetris_1_1_model_1_1_model_game}{ModelGame}}();}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ UpdateModel(Command\ command,\ DescriptionModelPtr\&\ desc)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ AddScore(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lines);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ AbstractBlockPtr\ CreateRandomBlock(AbstractBlockPtr\ withoutBlock\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ AbstractBlockPtr\ CreateBlock(\textcolor{keyword}{const}\ std::array<TypeBlock,\ 7>\&\ blockTypes,\ \textcolor{keyword}{const}\ std::array<TypeColor,\ 4>\&\ colorTypes);}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ AbstractBlockPtr\ CreateBlockExcluding(AbstractBlockPtr\ withoutBlock,\ \textcolor{keyword}{const}\ std::array<TypeBlock,\ 7>\&\ blockTypes,\ \textcolor{keyword}{const}\ std::array<TypeColor,\ 4>\&\ colorTypes);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T,\ \textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ FillExcludingArray(\textcolor{keyword}{const}\ std::array<T,\ N>\&\ source,\ T\ excluded,\ std::array<T,\ N-\/1>\&\ dest);}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ RegisterBlocks();}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ ResetGame(DescriptionModelPtr\ \&desc);}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ UpdateScore(DescriptionModelPtr\ \&desc);}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ SpawnNewBlock(DescriptionModelPtr\ \&desc);}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_tetris_1_1_model_1_1_map}{Map}}\ \_map;\ \textcolor{comment}{//<\ Карта\ игры,\ представляющая\ игровое\ поле}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_tetris_1_1_model_1_1_blocks_1_1_blocks_factory}{Blocks::BlocksFactory}}\ \_factory;\ \textcolor{comment}{//<\ Фабрика\ блоков\ для\ создания\ игровых\ блоков}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \_score\{0\};\ \textcolor{comment}{//<\ Текущий\ счет\ игрока}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ std::random\_device\ \_device;\ \textcolor{comment}{//<\ Генератор\ случайных\ чисел\ для\ выбора\ блоков}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ std::mt19937\ \_randomEngine;\ \textcolor{comment}{//<\ Двигатель\ случайных\ чисел\ для\ генерации\ случайных\ значений}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ AbstractBlockPtr\ \_currentBlock;\ \textcolor{comment}{//<\ Текущий\ активный\ блок,\ который\ управляется\ игроком}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ AbstractBlockPtr\ \_nextBlock;\ \textcolor{comment}{//<\ Следующий\ блок,\ который\ будет\ использоваться\ в\ игре}}
\DoxyCodeLine{00130\ \ \ \ \ \};}
\DoxyCodeLine{00131\ \}\ \textcolor{comment}{//\ namespace\ Tetris::Model}}

\end{DoxyCode}
